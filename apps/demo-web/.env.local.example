# ============================================
# Demo Web App Environment Variables
# ============================================
# This file contains environment variables specific to the Next.js web application.
#
# Setup Instructions:
#   1. Copy this file to .env.local: cp .env.local.example .env.local
#   2. Fill in your actual API keys and credentials
#   3. Start the dev server: pnpm dev
#
# For repository-level scripts (graph seeding, migrations), see:
#   ../../.env.example (root level)
# ============================================

# ============================================
# LLM Provider (at least ONE required)
# ============================================
# Get API keys from:
# - Groq: https://console.groq.com/keys
# - OpenAI: https://platform.openai.com/api-keys
# - Anthropic: https://console.anthropic.com/settings/keys
# - Google: https://ai.google.dev/gemini-api/docs/api-key
GROQ_API_KEY=your_groq_api_key_here
# OPENAI_API_KEY=your_openai_api_key_here
# ANTHROPIC_API_KEY=your_anthropic_api_key_here
# GOOGLE_GENERATIVE_AI_API_KEY=your_google_api_key_here

# Optional: Use a local LLM with OpenAI-compatible API (vLLM, Ollama, etc.)
# LOCAL_LLM_BASE_URL=http://localhost:8000/v1

# ============================================
# Memgraph Database
# ============================================
# Connection URI for Memgraph or Neo4j graph database
# Default for local development: bolt://localhost:7687
MEMGRAPH_URI=bolt://localhost:7687
# MEMGRAPH_USERNAME=memgraph
# MEMGRAPH_PASSWORD=your_password_here
# MEMGRAPH_DATABASE=memgraph

# Alternative connection details (if needed)
# MEMGRAPH_HOST=localhost
# MEMGRAPH_PORT=7687

# ============================================
# MCP Configuration
# ============================================
# Perplexity API for web search via MCP
# Get API key from: https://www.perplexity.ai/settings/api
PERPLEXITY_API_KEY=your_perplexity_api_key_here

# Optional: Make MCP read-only (default: false)
# MCP_READ_ONLY=false

# ============================================
# E2B Code Execution (Optional)
# ============================================
# Required for Python/code execution features
# Get API key from: https://e2b.dev/dashboard/api-keys
# E2B_API_KEY=your_e2b_api_key_here

# ============================================
# Supabase (local development)
# ============================================
# Values are printed after running `supabase start`
# and should match the seeded tenant/user IDs from
# `supabase/seed/demo_seed.sql`.
NEXT_PUBLIC_SUPABASE_URL=http://localhost:54321
NEXT_PUBLIC_SUPABASE_ANON_KEY=replace_with_local_anon_key
SUPABASE_SERVICE_ROLE_KEY=replace_with_local_service_role_key
SUPABASE_DEMO_TENANT_ID=replace_with_seeded_demo_tenant_id
NEXT_PUBLIC_SUPABASE_DEMO_USER_ID=replace_with_seeded_demo_user_id
NEXT_PUBLIC_SUPABASE_DEMO_EMAIL=demo.user@example.com

# ============================================
# NextAuth Configuration
# ============================================
# Generate a secure random string for NEXTAUTH_SECRET:
# openssl rand -base64 32
NEXTAUTH_SECRET=replace_with_secure_random_string
NEXTAUTH_URL=http://localhost:3000

# ============================================
# Mode Configuration (Optional)
# ============================================
# Conversation storage mode: 'auto', 'memory', 'supabase'
# Default: 'auto' (uses Supabase if configured, otherwise memory)
# COPILOT_CONVERSATIONS_MODE=auto

# Graph write mode: 'auto', 'enabled', 'disabled'
# Default: 'auto' (enables if Memgraph is configured)
# COPILOT_GRAPH_WRITE_MODE=auto

# ============================================
# OpenTelemetry Configuration (Optional)
# ============================================
# Enable comprehensive logging, tracing, and metrics collection
# See ../../docker/OBSERVABILITY.md for setup instructions
# To start: cd ../../docker && docker compose up -d otel-collector jaeger prometheus

# Service name for observability
# OTEL_SERVICE_NAME=@reg-copilot/demo-web

# Enable OTEL log exporter (sends logs to OTEL collector)
# OTEL_LOGS_ENABLED=false

# OTLP endpoints for telemetry export
# OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318
# OTEL_EXPORTER_OTLP_TRACES_ENDPOINT=http://localhost:4318/v1/traces
# OTEL_EXPORTER_OTLP_METRICS_ENDPOINT=http://localhost:4318/v1/metrics
# OTEL_EXPORTER_OTLP_LOGS_ENDPOINT=http://localhost:4318/v1/logs

# Sampling ratio for traces (1.0 = 100%, 0.1 = 10%, 0.01 = 1%)
# OTEL_TRACES_SAMPLING_RATIO=1.0

# Always sample errors (default: true)
# OTEL_TRACES_ALWAYS_SAMPLE_ERRORS=true

# ============================================
# Logging Configuration (Optional)
# ============================================
# Log level: 'debug', 'info', 'warn', 'error'
# LOG_LEVEL=info

# Log sanitized payloads for debugging (default: false)
# LOG_SAFE_PAYLOADS=false

# ============================================
# Redis (Optional - for distributed deployments)
# ============================================
# Redis enables distributed capabilities across multiple Next.js instances:
# 1. Distributed SSE fan-out for real-time conversation events
# 2. Distributed rate limiting for client telemetry endpoint
#
# Local development with Docker: redis://localhost:6379
# To start Redis: cd ../../docker && docker compose up -d redis
# REDIS_URL=redis://localhost:6379
# REDIS_TOKEN=devpassword

# Production with Upstash Redis (recommended for serverless/edge):
# Get credentials from: https://upstash.com
# UPSTASH_REDIS_REST_URL=https://your-redis-url.upstash.io
# UPSTASH_REDIS_REST_TOKEN=your_upstash_token

# Rate limiting configuration
# CLIENT_TELEMETRY_RATE_LIMIT_MAX_REQUESTS=100
# CLIENT_TELEMETRY_RATE_LIMIT_WINDOW_MS=60000

# Note: If Redis is not configured, the application will use in-memory fallbacks.
# This works fine for single-instance deployments but won't scale horizontally.

# ============================================
# Cron Jobs (Optional)
# ============================================
# Secret for authenticating cron job endpoints
# CRON_SECRET=your_cron_secret_here